<admintpl file="header"/>
<script src="__PUBLIC__/js/layer/layer.js"></script>
<script src="__PUBLIC__/js/ajaxfileupload.js"></script>
<script src="http://cdn.bootcss.com/blueimp-md5/1.1.0/js/md5.js"></script>
<meta http-equiv="Access-Control-Allow-Origin" content="*">
<style type="text/css">
    .box2 {
        width: 40%;
        float: left;
    }

    .box3 {
        width: 60%;
        float: left;
    }

    .clear {
        clear: both;
    }
    input {
         width: 60%;
     }
</style>
</head>
<body>
<div class="wrap">
    <ul class="nav nav-tabs">
        <li class="active"><a href="{:U('Intoleshua/index')}">返回</a></li>
    </ul>
    <div class="box1">
        <div class="box2">
            <h3 align="center">客户资料</h3>
            <div class="control-group">
                <label class="control-label" for="expanderCd">用户名</label>
                <div class="controls">
                    <input type="text" name="expanderCd" value="{$phone.user_name}" disabled="disabled">
                    &nbsp;&nbsp;<span style="color: red"></span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="expanderCd">手机号码</label>
                <div class="controls">
                    <input type="text" name="expanderCd" value="{$phone.user_phone}" disabled="disabled">
                    &nbsp;&nbsp;<span style="color: red"></span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="expanderCd">商户名称</label>
                <div class="controls">
                    <input type="text" name="expanderCd" value="{$list.merchant_name}" disabled="disabled"> &nbsp;&nbsp;<span
                        style="color: red"></span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="expanderCd">省</label>
                <div class="controls">
                    <input type="text" name="expanderCd" value="{$list.province}" disabled="disabled"> &nbsp;&nbsp;<span
                        style="color: red"></span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="expanderCd">市</label>
                <div class="controls">
                    <input type="text" name="expanderCd" value="{$list.city}" disabled="disabled"> &nbsp;&nbsp;
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="expanderCd">县</label>
                <div class="controls">
                    <input type="text" name="expanderCd" value="{$list.county}" disabled="disabled"> &nbsp;&nbsp;<span
                        style="color: red"></span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="expanderCd">详细地址</label>
                <div class="controls">
                    <input type="text" name="expanderCd" value="{$list.address}" disabled="disabled"> &nbsp;&nbsp;<span
                        style="color: red"></span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="expanderCd">所属行业</label>
                <div class="controls">
                    <input type="text" name="expanderCd" value="{$list.industry}" disabled="disabled"> &nbsp;&nbsp;<span
                        style="color: red"></span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="expanderCd">营业执照</label>
                <div class="controls">
                    <img src="/data/upload/{$list.business_license}" style="width: 200px">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="expanderCd">姓名</label>
                <div class="controls">
                    <input type="text" name="expanderCd" value="{$list.operator_name}" disabled="disabled"> &nbsp;&nbsp;<span
                        style="color: red"></span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="expanderCd">身份证</label>
                <div class="controls">
                    <input type="text" name="expanderCd" value="{$list.id_number}" disabled="disabled">
                    &nbsp;&nbsp;<span style="color: red"></span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="expanderCd">账号类型</label>
                <div class="controls">
                    <input type="text" name="expanderCd" value='<switch name="list.account_type">
                        <case value="0">个人账户</case>
                        <case value="1">企业账号</case></switch>' disabled="disabled"> &nbsp;&nbsp;<span
                        style="color: red"></span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="expanderCd">开户银行</label>
                <div class="controls">
                    <input type="text" name="expanderCd" value="{$list.bank_account}" disabled="disabled">
                    &nbsp;&nbsp;<span style="color: red"></span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="expanderCd">开户支付</label>
                <div class="controls">
                    <input type="text" name="expanderCd" value="{$list.bank_account_no}" disabled="disabled"> &nbsp;&nbsp;<span
                        style="color: red"></span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="expanderCd">银行账号</label>
                <div class="controls">
                    <input type="text" name="expanderCd" value="{$list.bank_account_no}" disabled="disabled"> &nbsp;&nbsp;<span
                        style="color: red"></span>
                </div>
            </div>
        </div>
        <!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
        <div class="box3">
            <form id="form1" method="post" class="form-horizontal" action="{:U('Intoleshua/add')}">
                <h3 align="center">进件资料</h3>
                <div class="control-group">
                    <label class="control-label" for="m_id">商户ID</label>
                    <div class="controls">
                        <input type="text" id="m_id" name="m_id" value="{$id}" placeholder="请填写商户id"> <span
                            style="color: red">*</span>
                        <input type="hidden" id="orgNo" name="orgNo" value="7170">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="merchantType">商户类型</label>
                    <div class="controls">
                        <select name="merchantType" id="merchantType" onchange="disp(this)">
                            <option value="">选择</option>
                            <option value="1">个人</option>
                            <option value="3">企业</option>
                        </select>
                        <span style="color: red">*（开通公众号支付必须为企业类型）</span>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="name">姓名</label>
                    <div class="controls">
                        <input type="text" id="name" name="name" value="{$list.operator_name}" placeholder="姓名"> <span
                            style="color: red">*（企业填法人）</span>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="idcard">法人身份证号</label>
                    <div class="controls">
                        <input type="text" id="idcard" name="idcard" value="{$list.id_number|decrypt=###}"
                               placeholder="身份证号"> <span style="color: red">*</span>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="mobile">手机号</label>
                    <div class="controls">
                        <input type="text" id="mobile" name="mobile" value="" placeholder="手机号"> <span
                            style="color: red">*</span>
                    </div>
                </div>
                <div class="control-group qiyea">
                    <label class="control-label" for="idcardFrontPic">法人身份证正面照片</label>
                    <div class="controls">
                        <a class="file">
                            <label for="idcardFrontPic" class="idcardFrontPic"><img src="__PUBLIC__/js/o_ff6.png"
                                                                                    style="height: 60px">
                            <input type="file" id="idcardFrontPic" name="idcardFrontPic" style="display: none"
                                   onchange="ajaxFileUpload(this);"/></label></a><br/>
                        <label class="pic2">法人请上传身份证反面</label>
                        <span style="color: red">*（图片大小均不能超出1M）</span></p>
                    </div>
                </div>
                <div class="control-group qiyea">
                    <label class="control-label" for="idcardBackPic">法人身份证反面照片</label>
                    <div class="controls">
                        <a class="file">
                            <label for="idcardBackPic" class="idcardBackPic"><img src="__PUBLIC__/js/o_ff6.png"
                                                                                  style="height: 60px">
                            <input type="file" id="idcardBackPic" name="idcardBackPic" style="display: none"
                                   onchange="ajaxFileUpload(this);"/></label></a><br/>
                        <label class="pic2">法人请上传身份证反面</label></p>
                    </div>
                </div>
                <div class="control-group qiyea">
                    <label class="control-label" for="bankCardFrontPic">银行卡正面（如是对公账户，开户许可证）</label>
                    <div class="controls">
                        <a class="file">
                            <label for="bankCardFrontPic" class="bankCardFrontPic"><img src="__PUBLIC__/js/o_ff6.png"
                                                                                        style="height: 60px">
                            <input type="file" id="bankCardFrontPic" name="bankCardFrontPic" style="display: none"
                                   onchange="ajaxFileUpload(this);"/></label></a><br/>
                        <label class="pic2">如是对公账户，开户许可证</label></p>
                    </div>
                </div>
                <div class="control-group qiyea">
                    <label class="control-label" for="licensePic">营业执照</label>
                    <div class="controls">
                        <a class="file">
                            <label for="licensePic" class="licensePic"><img src="__PUBLIC__/js/o_ff6.png"
                                                                            style="height: 60px">
                            <input type="file" id="licensePic" name="licensePic" style="display: none"
                                   onchange="ajaxFileUpload(this);"/></label></a><br/>
                        <label class="pic2">营业执照</label></p>
                    </div>
                </div>
                <div class="control-group qiyea">
                    <label class="control-label" for="insidePic">内景照</label>
                    <div class="controls">
                        <a class="file">
                            <label for="insidePic" class="insidePic"><img src="__PUBLIC__/js/o_ff6.png"
                                                                          style="height: 60px">
                            <input type="file" id="insidePic" name="insidePic" style="display: none"
                                   onchange="ajaxFileUpload(this);"/></label></a><br/>
                        <label class="pic2">内景照</label></p>
                    </div>
                </div>
                <div class="control-group qiyea">
                    <label class="control-label" for="doorPic">门头</label>
                    <div class="controls">
                        <a class="file">
                            <label for="doorPic" class="doorPic"><img src="__PUBLIC__/js/o_ff6.png"
                                                                      style="height: 60px">
                            <input type="file" id="doorPic" name="doorPic" style="display: none"
                                   onchange="ajaxFileUpload(this);"/></label></a><br/>
                        <label class="pic2">门头</label></p>
                    </div>
                </div>
                <div class="control-group qiyea">
                    <label class="control-label" for="cashierDeskPic">收银台</label>
                    <div class="controls">
                        <a class="file">
                            <label for="cashierDeskPic" class="cashierDeskPic"><img src="__PUBLIC__/js/o_ff6.png"
                                                                                    style="height: 60px">
                            <input type="file" id="cashierDeskPic" name="cashierDeskPic" style="display: none"
                                   onchange="ajaxFileUpload(this);"/></label></a><br/>
                        <label class="pic2">收银台</label></p>
                    </div>
                </div>
                <div class="control-group qiyea">
                    <label class="control-label" for="nonLegSettleAuthPic" style="color: blue">非法人结算授权书</label>
                    <div class="controls">
                        <a class="file">
                            <label for="nonLegSettleAuthPic" class="nonLegSettleAuthPic"><img src="__PUBLIC__/js/o_ff6.png"
                                                                                    style="height: 60px">
                            <input type="file" id="nonLegSettleAuthPic" name="nonLegSettleAuthPic" style="display: none"
                                   onchange="ajaxFileUpload(this);"/></label></a><br/>
                        <label class="pic2">非法人结算授权书</label></p>
                    </div>
                </div>
                <div class="control-group qiyea">
                    <label class="control-label" for="nonLegIdcardFrontPic" style="color: blue">非法人结算人身份证正面</label>
                    <div class="controls">
                        <a class="file">
                            <label for="nonLegIdcardFrontPic" class="nonLegIdcardFrontPic"><img src="__PUBLIC__/js/o_ff6.png"
                                                                                    style="height: 60px">
                            <input type="file" id="nonLegIdcardFrontPic" name="nonLegIdcardFrontPic" style="display: none"
                                   onchange="ajaxFileUpload(this);"/></label></a><br/>
                        <label class="pic2">非法人结算人身份证正面</label></p>
                    </div>
                </div>
                <div class="control-group qiyea">
                    <label class="control-label" for="nonLlegIdcardBackPic" style="color: blue">非法人结算人身份证反面</label>
                    <div class="controls">
                        <a class="file">
                            <label for="nonLlegIdcardBackPic" class="nonLlegIdcardBackPic"><img src="__PUBLIC__/js/o_ff6.png"
                                                                                    style="height: 60px">
                            <input type="file" id="nonLlegIdcardBackPic" name="nonLlegIdcardBackPic" style="display: none"
                                   onchange="ajaxFileUpload(this);"/></label></a><br/>
                        <label class="pic2">非法人结算人身份证反面</label></p>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="merchantName">商户简称</label>
                    <div class="controls">
                        <input type="text" id="merchantName" name="merchantName" value="" placeholder=""> <span
                            style="color: red">*<br>个人：商户名称如深圳市贵人鸟鞋服店（城市+名称+行业）或身份证姓名<br>企业：商户名称如深圳市贵人鸟鞋服店（城市+名称+行业） </span>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">省</label>
                    <div class="controls">
                        <select name="province" id="province">
                            <option>请选择省份</option>
                            <foreach name="province" item="vo">
                                <option num="{$vo.p_num}" value="{$vo.p_name}">{$vo.p_name}</option>
                            </foreach>
                        </select>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">市</label>
                    <div class="controls">
                        <select name="city" id="city">
                            <option>请选择城市</option>
                        </select>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">县/区</label>
                    <div class="controls">
                        <select name="area" id="area">
                            <option>请选择县/区</option>
                        </select>
                    </div>
                </div>
                <!--<div class="control-group">-->
                    <!--<label class="control-label" for="province">省</label>-->
                    <!--<div class="controls">-->
                        <!--<input type="text" id="province" name="province" value="{$list.province}" placeholder=""> <span-->
                            <!--style="color: red">*（直辖市填直辖市名如：北京市）</span>-->
                        <!--<br><a target="_blank" href="http://sy.youngport.com.cn/data/log/leShua/leshua_doc.docx">参考文档</a>-->
                    <!--</div>-->
                <!--</div>-->
                <!--<div class="control-group">-->
                    <!--<label class="control-label" for="city">市</label>-->
                    <!--<div class="controls">-->
                        <!--<input type="text" id="city" name="city" value="{$list.city}" placeholder=""> <span-->
                        <!--style="color: red">*（直辖市填直辖市名如：北京市）</span>-->
                    <!--</div>-->
                <!--</div>-->
                <!--<div class="control-group">-->
                    <!--<label class="control-label" for="area">县/区</label>-->
                    <!--<div class="controls">-->
                        <!--<input type="text" id="area" name="area" value="{$list.county}" placeholder=""> <span-->
                            <!--style="color: red">*</span>-->
                    <!--</div>-->
                <!--</div>-->
                <div class="control-group">
                    <label class="control-label" for="address">详细地址</label>
                    <div class="controls">
                        <input type="text" id="address" name="address" value="{$list.address}" placeholder=""> <span
                            style="color: red">*</span>
                    </div>
                </div>
                <div class="control-group qiyea">
                    <label class="control-label" for="isIndustryDining">是否为餐饮</label>
                    <div class="controls">
                        <select name="isIndustryDining" id="isIndustryDining" >
                            <option value="">选择</option>
                            <option value="1">是的</option>
                            <option value="0">不是的</option>
                        </select><span
                            style="color: red">*企业必填</span>
                    </div>
                </div>
                <div class="control-group qiyea">
                    <label class="control-label" for="footHealthPermissionPic">卫生许可证</label>
                    <div class="controls">
                        <a class="file">
                            <label for="footHealthPermissionPic" class="footHealthPermissionPic"><img src="__PUBLIC__/js/o_ff6.png"
                                                                      style="height: 60px">
                                <input type="file" id="footHealthPermissionPic" name="footHealthPermissionPic" style="display: none"
                                       onchange="ajaxFileUpload(this);"/></label></a><br/>
                        <label class="pic2">卫生许可证（餐饮行业需要）</label></p>
                    </div>
                </div>
                <div class="control-group qiyea">
                    <label class="control-label" for="license">营业执照注册号</label>
                    <div class="controls">
                        <input type="text" id="license" name="license"
                               value="{$list.business_license_number|decrypt=###}" placeholder=""> <span
                            style="color: red">*企业必填</span>
                    </div>
                </div>
                <div class="control-group qiyea">
                    <label class="control-label" for="licenseFullName">营业执照注册名称</label>
                    <div class="controls">
                        <input type="text" id="licenseFullName" name="licenseFullName" value="" placeholder=""> <span
                            style="color: red">*企业必填</span>
                    </div>
                </div>
                <div class="control-group qiyea">
                    <label class="control-label" for="licenseAddress">营业执照注册地址</label>
                    <div class="controls">
                        <input type="text" id="licenseAddress" name="licenseAddress" value="" placeholder=""> <span
                            style="color: red">*企业必填</span>
                    </div>
                </div>
                <div class="control-group qiyea">
                    <label class="control-label" for="licenseStart">注册号开始日期</label>
                    <div class="controls">
                        <input type="text" id="licenseStart" name="licenseStart" value="" placeholder=""> <span
                            style="color: red">*格式2000-11-10 企业必填</span>
                    </div>
                </div>
                <div class="control-group qiyea">
                    <label class="control-label" for="licenseEnd">注册号结束日期</label>
                    <div class="controls">
                        <input type="text" id="licenseEnd" name="licenseEnd" value="" placeholder=""> <span
                            style="color: red">*企业必填</span>
                    </div>
                </div>
                <h5 align="center">银行卡设置</h5>
                <div class="control-group ">
                    <label class="control-label" for="type">银行账户类型</label>
                    <div class="controls">
                        <select name="type" id="type" onchange="disp(this)">
                            <option value="">选择</option>
                            <option value="1">个人</option>
                            <option value="2">企业</option>
                        </select></div>
                </div>
                <div class="control-group ">
                    <label class="control-label" for="branch">开户网点</label>
                    <div class="controls">
                        <input type="text" id="branch" name="branch" value="" placeholder=""> <span
                            style="color: red">*</span>
                    </div>
                </div>
                <div class="control-group ">
                    <label class="control-label" for="unionpay">开户支行联行号</label>
                    <div class="controls">
                        <input type="text" id="unionpay" name="unionpay" value="" placeholder=""> <span
                            style="color: red">*</span>
                    </div>
                </div>
                <div class="control-group ">
                    <label class="control-label" for="holder">开户名</label>
                    <div class="controls">
                        <input type="text" id="holder" name="holder" value="{$list.account_name}" placeholder=""> <span
                            style="color: red">*</span>
                    </div>
                </div>
                <div class="control-group ">
                    <label class="control-label" for="cardId">银行卡号</label>
                    <div class="controls">
                        <input type="text" id="cardId" name="cardId" value=""
                               placeholder=""> <span style="color: red">*</span>
                    </div>
                </div>
                <div class="control-group ">
                    <label class="control-label" for="bankMobile">银行预留手机号</label>
                    <div class="controls">
                        <input type="text" id="bankMobile" name="bankMobile" value="" placeholder=""> <span
                            style="color: red">*</span>
                    </div>
                </div>
                <h5 align="center">公众号设置</h5>
                <div class="control-group ">
                    <label class="control-label" for="mccType">行业类别</label>
                    <div class="controls">
                        <select name="mccType" id="mccType">
                            <option value="">选择</option>
                            <option value="1">1-餐娱类</option>
                            <option value="2">2-一般类</option>
                            <option value="3">3-民生类</option>
                            <option value="4">4-批发类</option>
                            <option value="5">5-房车类</option>
                        </select></div>
                </div>
                <div class="control-group ">
                    <label class="control-label" for="mccCode">MCC 码商户行业编号(</label>
                    <div class="controls">
                        <input type="text"  id="mccCode" name="mccCode" value="" placeholder=""> <span
                            style="color: red">*</span>
                    </div>
                </div>
                <div class="control-group ">
                    <label class="control-label" for="userWx">联系人微信号</label>
                    <div class="controls">
                        <input type="text"  id="userWx" name="userWx" value="" placeholder=""> <span
                            style="color: red">*</span>
                    </div>
                </div>
                <div class="control-group ">
                    <label class="control-label" for="gzhMerchantName">公众号名称</label>
                    <div class="controls">
                        <input type="text"  id="gzhMerchantName" name="gzhMerchantName" value="深圳前海洋仆淘电子商务有限公司" placeholder=""> <span
                            style="color: red">*</span>
                    </div>
                </div>
                <div class="control-group ">
                    <label class="control-label" for="publicsignalAppid">公众号appid</label>
                    <div class="controls">
                        <input type="text"  id="publicsignalAppid" name="publicsignalAppid" value="wx3fa82ee7deaa4a21" placeholder=""> <span
                            style="color: red">*</span>
                    </div>
                </div>
                <div class="control-group ">
                    <label class="control-label" for="publicDirectory">授权回调域名</label>
                    <div class="controls">
                        <input type="text"  id="publicDirectory" name="publicDirectory" value="https://sy.youngport.com.cn/" placeholder=""> <span
                            style="color: red">*</span>
                    </div>
                </div>
                <div class="control-group ">
                    <label class="control-label" for="publicsignalAppidGZ">推荐关注appid</label>
                    <div class="controls">
                        <input type="text"  id="publicsignalAppidGZ" name="publicsignalAppidGZ" value="wx3fa82ee7deaa4a21" placeholder=""> <span
                            style="color: red">*</span>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" id="onSubmit" class="btn btn-primary js-ajax-submit">添加</button>
                    <a class="btn" href="javascript:history.back(-1);">返回</a>
                </div>

            </form>
        </div>
        <div class="clear"></div>
    </div>
</div>
<script src="__PUBLIC__/js/common.js"></script>

</body>
</html>
<script type="text/javascript">
    $("select#mccType").change(function () {
        console.log($(this).val());
    });
    function ajaxFileUpload(thisobj) {
        var fileid = $(thisobj).attr("id");
        $.ajaxFileUpload
        (
            {
                url: '{:U("Intoleshua/upload_into")}', //用于文件上传的服务器端请求地址
                secureuri: false, //是否需要安全协议，一般设置为false
                fileElementId: fileid, //文件上传域的ID
                data: {data: fileid},
                dataType: 'json', //返回值类型 一般设置为json
                success: function (data)  //服务器成功响应处理函数
                {
                    if (data.type == 1) {
                        var name = data.name
                        var path = data.path;
                        var content = "<img src='" + path + "' style='height: 140px'>" +
                            "<input type='hidden'  name='"+name+"' value='" + path + "'>";
                        $('.' + name).html(content);
                    } else if (data.type == 2) {
                        alert(data.message);
                    }
                },
                error: function (data)//服务器响应失败处理函数
                {
                    alert('网络请求失败,请重新上传图片');
                }
            }
        )
    }
    function disp(obj) {
        var type = $(obj).val();
        if (type == 1) {
            $('.qiyea').show();
        } else if (type == 3) {
            $('.qiyea').show();
        }
    }
    $(function () {
        $('.qiyea').hide();
    })

    $("#province").change(function () {
        var num = $(this).find(":selected").attr("num");
        getCityArea('city',num)
    })
    $("#city").change(function () {
        var num = $(this).find(":selected").attr("num");
        getCityArea('area',num)
    })

    function getCityArea(type,num) {
        $.post("{:U('getCity')}", {num:num,type:type}, function (res) {
            if(res.code === '0000'){
                console.log(res.data);
                var _str = '<option>请选择</option>';
                $.each(res.data, function (k, v) {
                    _str += '<option num="'+v.numb+'" value="'+v.name+'">'+v.name+'</option>'
                })
                $("#"+type+"").html(_str);
            }
        });
    }
</script>